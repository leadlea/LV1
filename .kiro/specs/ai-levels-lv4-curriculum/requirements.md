# 要件定義書: AI Levels Lv4 カリキュラム

## はじめに

AI Levels Lv4は、Lv3（AI活用プロジェクトリーダーシップ×チームAI戦略策定×AI導入計画立案×スキル育成計画×ROI評価改善）を合格した受講者が次に取り組むカリキュラムである。Lv1では「何は人間が、何はAIがやるべきか」「AIにどう依頼すべきか」の基礎を学び、Lv2では「AIを活用した業務プロセスを自ら設計・実行・検証し、チームに展開できる状態」を達成し、Lv3では「AI活用プロジェクトをリードし、チーム全体のAI活用レベルを引き上げる戦略を策定・実行できる状態」を達成した。Lv4では、その推進力を土台に、組織横断でAI活用の標準化・ガバナンスを設計し、持続的なAI活用文化を構築できる状態を目指す。

カリキュラム設計は以下の方法論に従う:
- ① 定義の具体化: コンサルとしてどのような価値を提供できる状態か
- ② 達成基準決め: 具体化された定義の達成をどう測定するか
- ③ テスト作成: 達成基準をクリアしたか判断できるテスト設計

既存のLv1〜Lv3と同一アーキテクチャ（Lambda + Bedrock + DynamoDB + 3エージェントパイプライン）を活用し、Lv4固有のプロンプト・テスト設計・フロントエンドを追加する。

## 用語集

- **フロントエンド**: S3に配置されCloudFrontで配信される静的Webサイト
- **バックエンドAPI**: API Gateway（REST）+ Lambda（Python 3.12）で構成されるサーバーレスAPI
- **出題エージェント（Test_Generator）**: カリキュラムに基づきテスト・ドリルを生成するAIエージェント
- **採点エージェント（Grader）**: ユーザー回答を受け取り合否判定を行うAIエージェント
- **レビューエージェント（Reviewer）**: 採点結果をもとにフィードバック・解説を生成するAIエージェント
- **Bedrock_Runtime**: AWS Bedrock上のClaude Sonnet 4.6モデルを呼び出すランタイム
- **セッション**: ブラウザ上で1回のLv4実行を開始してから完了するまでの一連の操作
- **ゲーティング**: 前レベル合格がないと次レベルを表示しない制御構造
- **Lv4カリキュラム**: Lv4で扱う学習内容（組織横断AI活用標準化×ガバナンス設計×持続的AI活用文化構築）
- **完了レコード**: 全ステップ完了時にDynamoDBに保存される設問・回答・採点結果の一式
- **組織横断ガバナンスシナリオ**: 組織全体のAI活用標準化・ガバナンス設計を求める高度な問題形式
- **AI活用標準化戦略**: 組織全体のAI活用状況を分析し、標準化された活用方針・ガイドラインを策定する能力
- **ガバナンスフレームワーク設計**: AI活用のポリシー・ルール・監査体制を包括的に設計する能力
- **組織横断AI推進体制構築**: 複数部門を横断してAI活用を推進する体制・プロセスを設計する能力
- **AI活用文化醸成プログラム**: 持続的なAI活用文化を構築するための組織変革プログラムを設計する能力
- **リスク管理・コンプライアンス**: AI活用に伴うリスクを包括的に管理し、法規制・倫理基準への準拠を確保する能力
- **中長期AI活用ロードマップ**: 組織全体の中長期的なAI活用計画と成果指標を策定する能力

## 要件

### 要件1: Lv4カリキュラム定義（①定義の具体化）

**ユーザーストーリー:** カリキュラム設計者として、Lv4到達者が提供できる具体的な価値を定義したい。Lv3のプロジェクトリーダーシップ力を前提に、組織横断でAI活用の標準化・ガバナンスを設計し、持続的なAI活用文化を構築できるスキルセットを明確にするため。

#### 受入基準

1. THE Lv4カリキュラム SHALL 「組織横断AI活用標準化×ガバナンス設計×持続的AI活用文化構築」をテーマとして定義する
2. THE Lv4カリキュラム SHALL Lv3の定義（AI活用プロジェクトリーダーシップ・チームAI戦略策定・AI導入計画立案・スキル育成計画・ROI評価改善の推進力）を前提知識として位置づける
3. THE Lv4カリキュラム SHALL 以下の6つの能力を到達目標として定義する: (a) 組織全体のAI活用状況を分析し、標準化された活用方針・ガイドラインを策定できる (b) AI活用のガバナンスフレームワーク（ポリシー・ルール・監査体制）を包括的に設計できる (c) 複数部門を横断してAI活用を推進する体制・プロセスを設計できる (d) 持続的なAI活用文化を構築するための組織変革プログラムを設計できる (e) AI活用に伴うリスクを包括的に管理し、法規制・倫理基準への準拠を確保する体制を設計できる (f) 組織全体の中長期AI活用ロードマップと成果指標を策定できる
4. THE Lv4カリキュラム SHALL Lv4到達者の価値を「組織横断でAI活用の標準化・ガバナンスを設計し、持続的なAI活用文化を構築できる状態」と定義する

### 要件2: Lv4達成基準（②達成基準決め）

**ユーザーストーリー:** カリキュラム設計者として、Lv4の達成を客観的に測定できる基準を設けたい。受講者の組織横断ガバナンス設計力を正確に判定するため。

#### 受入基準

1. THE Lv4カリキュラム SHALL 各到達目標に対して以下の達成基準を設定する: (a) AI活用標準化戦略: 組織全体のAI活用状況を分析し、部門横断で適用可能な標準化方針・ガイドラインを策定できること (b) ガバナンスフレームワーク設計: AI活用のポリシー・ルール・監査体制・責任分担を含む包括的なガバナンスフレームワークを設計できること (c) 組織横断AI推進体制構築: 複数部門の課題を把握し、横断的な推進体制・意思決定プロセス・コミュニケーション設計を策定できること (d) AI活用文化醸成プログラム: 組織の現状文化を分析し、段階的な変革プログラム・成功指標・定着化施策を設計できること (e) リスク管理・コンプライアンス: AI活用に伴うリスクシナリオを網羅的に特定し、法規制・倫理基準への準拠を含む包括的なリスク管理体制を設計できること (f) 中長期AI活用ロードマップ: 組織全体の中長期AI活用計画を策定し、定量的な成果指標（KPI）と評価サイクルを設計できること
2. THE Grader SHALL 各達成基準に対して0〜100のスコアで採点し、各基準60点以上を合格とする
3. THE Grader SHALL 全6基準の合格をもってLv4合格と判定する

### 要件3: Lv4テスト設計（③テスト作成）

**ユーザーストーリー:** カリキュラム受講者として、組織横断ガバナンスシナリオ形式の高度なテストを受けたい。実務での組織横断AI推進能力を確認できるようにするため。

#### 受入基準

1. WHEN ユーザーがLv4セッションを開始する, THE Test_Generator SHALL 組織横断のAI活用標準化・ガバナンスシナリオに基づく6問のテスト・ドリルを生成する
2. THE Test_Generator SHALL 各設問を以下の形式で生成する: (a) ステップ1（AI活用標準化戦略）: scenario形式 — 組織全体のAI活用状況を提示し、標準化戦略の策定を求める (b) ステップ2（ガバナンスフレームワーク設計）: free_text形式 — AI活用のガバナンスフレームワーク（ポリシー・ルール・監査体制）の設計を求める (c) ステップ3（組織横断AI推進体制構築）: scenario形式 — 複数部門のAI活用課題を提示し、横断的な推進体制の設計を求める (d) ステップ4（AI活用文化醸成プログラム）: free_text形式 — 持続的なAI活用文化を構築するための組織変革プログラムの設計を求める (e) ステップ5（リスク管理・コンプライアンス）: scenario形式 — AI活用に伴うリスクシナリオを提示し、包括的なリスク管理体制の設計を求める (f) ステップ6（中長期AI活用ロードマップ）: free_text形式 — 組織全体の中長期AI活用ロードマップと成果指標の策定を求める
3. WHEN 同一ユーザーがLv4セッションを再実行する, THE Test_Generator SHALL 前回とは異なる組織シナリオの組織横断ガバナンスシナリオを生成する
4. THE Test_Generator SHALL 6問すべてを同一の組織シナリオに基づいて生成し、一貫性のある組織横断ガバナンスシナリオとする
5. THE Test_Generator SHALL 組織横断ガバナンスシナリオの組織状況として、コンサルティング業務で実際に発生しうる大規模組織のAI活用標準化・ガバナンス課題を使用する

### 要件4: Lv4テスト・ドリルのランダム生成

**ユーザーストーリー:** カリキュラム受講者として、実行するたびに異なる組織横断ガバナンスシナリオを受け取りたい。暗記ではなくガバナンス設計力を確認できるようにするため。

#### 受入基準

1. WHEN ユーザーがLv4セッションを開始する, THE Test_Generator SHALL Lv4カリキュラム「組織横断AI活用標準化×ガバナンス設計×持続的AI活用文化構築」に基づいたテスト・ドリルを生成する
2. WHEN Test_GeneratorがLv4テスト・ドリルを生成する, THE バックエンドAPI SHALL Bedrock_Runtimeを通じてClaude Sonnet 4.6モデルを呼び出す
3. WHEN Lv4テスト・ドリルが生成される, THE Test_Generator SHALL ステップバイステップで進行可能な形式で設問を構成する
4. THE Test_Generator SHALL 生成結果をJSON形式で返却し、各設問にstep（1〜6の連番）、type、prompt、options（該当する場合）、contextフィールドを含める

### 要件5: Lv4回答の採点

**ユーザーストーリー:** カリキュラム受講者として、Lv4の各設問に対して達成基準に基づいた採点を受けたい。自分の組織横断ガバナンス設計力を客観的に確認できるようにするため。

#### 受入基準

1. WHEN ユーザーがLv4設問に回答を送信する, THE Grader SHALL Lv4の達成基準に基づいて回答内容を採点する
2. WHEN GraderがLv4の採点を実行する, THE バックエンドAPI SHALL Bedrock_Runtimeを通じてClaude Sonnet 4.6モデルを呼び出す
3. WHEN GraderがLv4の採点を完了する, THE Grader SHALL 0〜100のスコアと合格（60点以上）または不合格の判定結果を返却する
4. THE Grader SHALL Lv4固有の採点基準（標準化方針の網羅性、ガバナンス設計の包括性、推進体制の実効性、文化醸成プログラムの段階性、リスク管理の網羅性、ロードマップの実現可能性）を適用する

### 要件6: Lv4フィードバック・解説の生成

**ユーザーストーリー:** カリキュラム受講者として、Lv4の採点結果に基づいた組織横断ガバナンス設計力向上のためのフィードバックを受け取りたい。組織全体のAI活用推進者としての改善ポイントを把握できるようにするため。

#### 受入基準

1. WHEN GraderがLv4の採点結果を返却する, THE Reviewer SHALL 採点結果をもとにLv4の学習目標に沿ったフィードバックと解説を生成する
2. WHEN ReviewerがLv4のフィードバックを生成する, THE バックエンドAPI SHALL Bedrock_Runtimeを通じてClaude Sonnet 4.6モデルを呼び出す
3. WHEN ReviewerがLv4のフィードバック生成を完了する, THE フロントエンド SHALL フィードバックと解説をユーザーに表示する
4. THE Reviewer SHALL フィードバックに組織横断AI推進者としての具体的な改善アクションとベストプラクティスを含める

### 要件7: Lv4用3エージェント連動パイプライン

**ユーザーストーリー:** カリキュラム受講者として、Lv4でも出題→回答→採点→レビューの一連の流れをシームレスに体験したい。途切れることなく学習を進められるようにするため。

#### 受入基準

1. THE バックエンドAPI SHALL Lv4用のTest_Generator、Grader、Reviewerの3エージェントを順序通りに連動させるパイプラインを提供する
2. WHEN Test_GeneratorがLv4テスト・ドリルを生成完了する, THE フロントエンド SHALL 設問をユーザーに表示し回答入力を受け付ける
3. WHEN ユーザーがLv4の回答を送信する, THE バックエンドAPI SHALL Graderに回答を渡してLv4基準で採点を実行する
4. WHEN GraderがLv4の採点を完了する, THE バックエンドAPI SHALL Reviewerに採点結果を渡してLv4向けフィードバック生成を実行する
5. WHEN Lv4の全ステップが完了する, THE フロントエンド SHALL 最終結果（各基準の合否・総合判定・フィードバック）をユーザーに表示する

### 要件8: Lv4完了時のデータ永続化

**ユーザーストーリー:** システム運営者として、Lv4の全ステップを完了したセッションのデータをDynamoDBに保存したい。受講者の進捗を管理し、全レベルクリア状態を記録するため。

#### 受入基準

1. WHEN ユーザーがLv4の全ステップを完了する, THE バックエンドAPI SHALL 設問・回答・採点結果の完了レコードをDynamoDBに保存する
2. WHILE ユーザーがLv4セッション途中である, THE バックエンドAPI SHALL DynamoDBへの書き込みを行わない
3. WHEN Lv4完了レコードをDynamoDBに保存する, THE バックエンドAPI SHALL セッション識別子、タイムスタンプ、全設問、全回答、全採点結果、最終合否を含める
4. WHEN Lv4完了レコードをDynamoDBに保存する, THE バックエンドAPI SHALL SK（ソートキー）を「RESULT#lv4」として保存し、Lv1〜Lv3の結果と区別する
5. IF DynamoDBへのLv4保存が失敗する, THEN THE バックエンドAPI SHALL エラーをログに記録しユーザーにリトライ可能な旨を通知する

### 要件9: Lv4ゲーティング

**ユーザーストーリー:** カリキュラム受講者として、Lv3に合格した後にLv4にアクセスしたい。段階的に学習を積み上げられるようにするため。

#### 受入基準

1. WHILE ユーザーがLv3に合格していない, THE フロントエンド SHALL Lv4を非表示かつアクセス不可とする
2. WHEN ユーザーがLv3に合格する, THE フロントエンド SHALL Lv4カードを表示し「開始する」ボタンを有効にする
3. WHEN ユーザーがLv4に合格する, THE バックエンドAPI SHALL progressテーブルのlv4_passedフラグをtrueに更新する
4. THE バックエンドAPI SHALL レベル合格状態検証エンドポイント（GET /levels/status）でLv4の合格状態を返却する
5. WHEN フロントエンドがレベル表示を判定する, THE フロントエンド SHALL バックエンドAPIのレベル合格状態検証エンドポイントを呼び出してLv4の表示可否を判定する

### 要件10: Lv4フロントエンド

**ユーザーストーリー:** カリキュラム受講者として、Lv4専用のテスト画面で組織横断ガバナンスシナリオに取り組みたい。Lv4の学習内容に集中できるようにするため。

#### 受入基準

1. THE フロントエンド SHALL Lv4専用のテスト実行ページ（lv4.html）を提供する
2. THE フロントエンド SHALL lv4.htmlでLv4の6ステップ（AI活用標準化戦略→ガバナンスフレームワーク設計→組織横断AI推進体制構築→AI活用文化醸成プログラム→リスク管理・コンプライアンス→中長期AI活用ロードマップ）を順次表示する
3. WHEN ユーザーがlv4.htmlにアクセスする, THE フロントエンド SHALL Lv3合格状態を検証し、未合格の場合はindex.htmlにリダイレクトする
4. THE フロントエンド SHALL index.htmlのLv4カードにlv4.htmlへのリンクを設定する
5. THE フロントエンド SHALL Lv4の組織横断ガバナンスシナリオ形式に適したUI（組織状況表示エリア、ガバナンス設計用の構造化テキストエリア、リスクシナリオ表示エリア）を提供する

### 要件11: Lv4バックエンドAPIエンドポイント

**ユーザーストーリー:** 開発者として、Lv4用のAPIエンドポイントを追加したい。Lv1〜Lv3のエンドポイントと分離し、レベル固有のプロンプト・ロジックを適用するため。

#### 受入基準

1. THE バックエンドAPI SHALL POST /lv4/generate エンドポイントを提供し、Lv4用テスト・ドリル生成を処理する
2. THE バックエンドAPI SHALL POST /lv4/grade エンドポイントを提供し、Lv4用回答採点を処理する
3. THE バックエンドAPI SHALL POST /lv4/complete エンドポイントを提供し、Lv4用完了レコード保存を処理する
4. THE バックエンドAPI SHALL 各Lv4エンドポイントでLv4固有のシステムプロンプトを使用する
5. THE バックエンドAPI SHALL 既存のGET /levels/statusエンドポイントを拡張し、Lv4の合格状態を含めて返却する
6. THE バックエンドAPI SHALL 各Lv4エンドポイントでCORS（Access-Control-Allow-Origin: *）を有効にする

### 要件12: Lv4デプロイメント

**ユーザーストーリー:** 開発者として、Lv4の追加をCI/CDパイプラインで自動デプロイしたい。既存のデプロイフローを維持しつつLv4を追加するため。

#### 受入基準

1. THE serverless.yml SHALL Lv4用の3つのLambda関数（generate、grade、complete）を定義する
2. WHEN コードがmainブランチにpushされる, THE CI/CDパイプライン SHALL Lv4のLambda関数を含めてデプロイする
3. WHEN コードがmainブランチにpushされる, THE CI/CDパイプライン SHALL lv4.htmlを含むフロントエンドをS3に同期する
4. THE serverless.yml SHALL Lv4のLambda関数に既存と同じDynamoDB・Bedrockのアクセス権限を付与する

### 要件13: Lv4合格時の全レベルクリア表示

**ユーザーストーリー:** カリキュラム受講者として、Lv4に合格した際に全レベルクリアの達成感を得たい。AI Levelsカリキュラム全体の修了を確認できるようにするため。

#### 受入基準

1. WHEN ユーザーがLv4に合格する, THE フロントエンド SHALL 全レベルクリアの祝福メッセージを表示する
2. WHEN ユーザーがLv4に合格する, THE フロントエンド SHALL index.htmlで全レベル（Lv1〜Lv4）が合格済みであることを視覚的に表示する
3. THE バックエンドAPI SHALL GET /levels/statusエンドポイントで全レベル合格状態（lv1_passed、lv2_passed、lv3_passed、lv4_passed）を返却する

### 要件14: gate_handlerの4引数化

**ユーザーストーリー:** 開発者として、gate_handlerの_build_levels関数を4引数（lv1_passed, lv2_passed, lv3_passed, lv4_passed）に拡張したい。Lv4の合格状態をゲーティングロジックに反映するため。

#### 受入基準

1. THE gate_handler SHALL _build_levels関数を4引数（lv1_passed, lv2_passed, lv3_passed, lv4_passed）で受け取るよう拡張する
2. THE gate_handler SHALL Lv4のunlockedをlv3_passedの値に基づいて判定する
3. THE gate_handler SHALL Lv4のpassedをlv4_passedの値に基づいて判定する
4. THE gate_handler SHALL DynamoDBからlv4_passedフラグを取得してレスポンスに含める
