# 要件定義書: AI Levels Lv2 カリキュラム

## はじめに

AI Levels Lv2は、Lv1（分業設計×依頼設計×品質担保×2ケース再現）を合格した受講者が次に取り組むカリキュラムである。Lv1では「何は人間が、何はAIがやるべきか」「AIにどう依頼すべきか」の基礎を学んだ。Lv2では、その基礎を実務に適用し、AIを活用した業務プロセスを自ら設計・実行・改善できる状態を目指す。

カリキュラム設計は以下の方法論に従う:
- ① 定義の具体化: コンサルとしてどのような価値を提供できる状態か
- ② 達成基準決め: 具体化された定義の達成をどう測定するか
- ③ テスト作成: 達成基準をクリアしたか判断できるテスト設計

既存のLv1と同一アーキテクチャ（Lambda + Bedrock + DynamoDB + 3エージェントパイプライン）を活用し、Lv2固有のプロンプト・テスト設計・フロントエンドを追加する。

## 用語集

- **フロントエンド**: S3に配置されCloudFrontで配信される静的Webサイト
- **バックエンドAPI**: API Gateway（REST）+ Lambda（Python 3.12）で構成されるサーバーレスAPI
- **出題エージェント（Test_Generator）**: カリキュラムに基づきテスト・ドリルを生成するAIエージェント
- **採点エージェント（Grader）**: ユーザー回答を受け取り合否判定を行うAIエージェント
- **レビューエージェント（Reviewer）**: 採点結果をもとにフィードバック・解説を生成するAIエージェント
- **Bedrock_Runtime**: AWS Bedrock上のClaude Sonnet 4.6モデルを呼び出すランタイム
- **セッション**: ブラウザ上で1回のLv2実行を開始してから完了するまでの一連の操作
- **ゲーティング**: 前レベル合格がないと次レベルを表示しない制御構造
- **Lv2カリキュラム**: Lv2で扱う学習内容（業務プロセス設計×AI実行指示×成果物検証×改善サイクル）
- **完了レコード**: 全ステップ完了時にDynamoDBに保存される設問・回答・採点結果の一式
- **ケーススタディ**: 実際の業務シナリオを模した実践的な問題形式
- **業務プロセス設計**: AIと人間の協働フローを具体的に設計する能力
- **AI実行指示**: AIへの指示を業務文脈に合わせて構造化・最適化する能力
- **成果物検証**: AIが生成した成果物の品質を評価・修正する能力
- **改善サイクル**: AI活用プロセスを振り返り、継続的に改善する能力

## 要件

### 要件1: Lv2カリキュラム定義（①定義の具体化）

**ユーザーストーリー:** カリキュラム設計者として、Lv2到達者が提供できる具体的な価値を定義したい。Lv1の基礎知識を前提に、実務で再現可能なスキルセットを明確にするため。

#### 受入基準

1. THE Lv2カリキュラム SHALL 「業務プロセス設計×AI実行指示×成果物検証×改善サイクル」をテーマとして定義する
2. THE Lv2カリキュラム SHALL Lv1の定義（分業設計・依頼設計の理解）を前提知識として位置づける
3. THE Lv2カリキュラム SHALL 以下の4つの能力を到達目標として定義する: (a) 業務プロセスにおけるAI活用ポイントを特定し、人間とAIの協働フローを設計できる (b) 業務の文脈・制約を踏まえたAIへの実行指示を構造化できる (c) AIが生成した成果物の品質を業務基準で評価し、必要な修正を指示できる (d) AI活用の結果を振り返り、プロセスの改善点を特定できる
4. THE Lv2カリキュラム SHALL Lv2到達者の価値を「AIを活用した業務プロセスを自ら設計・実行・検証し、チームに展開できる状態」と定義する

### 要件2: Lv2達成基準（②達成基準決め）

**ユーザーストーリー:** カリキュラム設計者として、Lv2の達成を客観的に測定できる基準を設けたい。受講者の到達度を正確に判定するため。

#### 受入基準

1. THE Lv2カリキュラム SHALL 各到達目標に対して以下の達成基準を設定する: (a) 業務プロセス設計: 与えられた業務シナリオに対し、AIと人間の役割分担を含む具体的なフローを設計できること (b) AI実行指示: 設計したフローに基づき、AIへの指示を目的・制約・出力形式を含む構造化された形で記述できること (c) 成果物検証: AIの出力に対し、業務要件との適合性・正確性・改善点を具体的に指摘できること (d) 改善サイクル: AI活用プロセスの実行結果から、次回改善すべきポイントを根拠とともに提示できること
2. THE Grader SHALL 各達成基準に対して0〜100のスコアで採点し、各基準60点以上を合格とする
3. THE Grader SHALL 全4基準の合格をもってLv2合格と判定する

### 要件3: Lv2テスト設計（③テスト作成）

**ユーザーストーリー:** カリキュラム受講者として、実践的なケーススタディ形式のテストを受けたい。実務に近い状況で自分の能力を確認できるようにするため。

#### 受入基準

1. WHEN ユーザーがLv2セッションを開始する, THE Test_Generator SHALL 実務を模したケーススタディに基づく4問のテスト・ドリルを生成する
2. THE Test_Generator SHALL 各設問を以下の形式で生成する: (a) ステップ1（業務プロセス設計）: scenario形式 — 業務シナリオを提示し、AI活用フローの設計を求める (b) ステップ2（AI実行指示）: free_text形式 — ステップ1で設計したフローの一部について、AIへの具体的な指示文を作成させる (c) ステップ3（成果物検証）: scenario形式 — AIが生成した成果物サンプルを提示し、品質評価と改善指示を求める (d) ステップ4（改善サイクル）: free_text形式 — 一連のプロセスを振り返り、改善提案を求める
3. WHEN 同一ユーザーがLv2セッションを再実行する, THE Test_Generator SHALL 前回とは異なる業務シナリオのケーススタディを生成する
4. THE Test_Generator SHALL 4問すべてを同一の業務シナリオに基づいて生成し、一貫性のあるケーススタディとする
5. THE Test_Generator SHALL ケーススタディの業務シナリオとして、コンサルティング業務で実際に発生しうる状況を使用する

### 要件4: Lv2テスト・ドリルのランダム生成

**ユーザーストーリー:** カリキュラム受講者として、実行するたびに異なるケーススタディを受け取りたい。暗記ではなく応用力を確認できるようにするため。

#### 受入基準

1. WHEN ユーザーがLv2セッションを開始する, THE Test_Generator SHALL Lv2カリキュラム「業務プロセス設計×AI実行指示×成果物検証×改善サイクル」に基づいたテスト・ドリルを生成する
2. WHEN Test_GeneratorがLv2テスト・ドリルを生成する, THE バックエンドAPI SHALL Bedrock_Runtimeを通じてClaude Sonnet 4.6モデルを呼び出す
3. WHEN Lv2テスト・ドリルが生成される, THE Test_Generator SHALL ステップバイステップで進行可能な形式で設問を構成する
4. THE Test_Generator SHALL 生成結果をJSON形式で返却し、各設問にstep（1〜4の連番）、type、prompt、options（該当する場合）、contextフィールドを含める

### 要件5: Lv2回答の採点

**ユーザーストーリー:** カリキュラム受講者として、Lv2の各設問に対して達成基準に基づいた採点を受けたい。自分の実践力を客観的に確認できるようにするため。

#### 受入基準

1. WHEN ユーザーがLv2設問に回答を送信する, THE Grader SHALL Lv2の達成基準に基づいて回答内容を採点する
2. WHEN GraderがLv2の採点を実行する, THE バックエンドAPI SHALL Bedrock_Runtimeを通じてClaude Sonnet 4.6モデルを呼び出す
3. WHEN GraderがLv2の採点を完了する, THE Grader SHALL 0〜100のスコアと合格（60点以上）または不合格の判定結果を返却する
4. THE Grader SHALL Lv2固有の採点基準（業務プロセスの具体性、指示の構造化度、検証の的確さ、改善提案の実現可能性）を適用する

### 要件6: Lv2フィードバック・解説の生成

**ユーザーストーリー:** カリキュラム受講者として、Lv2の採点結果に基づいた実践的なフィードバックを受け取りたい。実務での改善ポイントを把握できるようにするため。

#### 受入基準

1. WHEN GraderがLv2の採点結果を返却する, THE Reviewer SHALL 採点結果をもとにLv2の学習目標に沿ったフィードバックと解説を生成する
2. WHEN ReviewerがLv2のフィードバックを生成する, THE バックエンドAPI SHALL Bedrock_Runtimeを通じてClaude Sonnet 4.6モデルを呼び出す
3. WHEN ReviewerがLv2のフィードバック生成を完了する, THE フロントエンド SHALL フィードバックと解説をユーザーに表示する
4. THE Reviewer SHALL フィードバックに実務での具体的な改善アクションを含める

### 要件7: Lv2用3エージェント連動パイプライン

**ユーザーストーリー:** カリキュラム受講者として、Lv2でも出題→回答→採点→レビューの一連の流れをシームレスに体験したい。途切れることなく学習を進められるようにするため。

#### 受入基準

1. THE バックエンドAPI SHALL Lv2用のTest_Generator、Grader、Reviewerの3エージェントを順序通りに連動させるパイプラインを提供する
2. WHEN Test_GeneratorがLv2テスト・ドリルを生成完了する, THE フロントエンド SHALL 設問をユーザーに表示し回答入力を受け付ける
3. WHEN ユーザーがLv2の回答を送信する, THE バックエンドAPI SHALL Graderに回答を渡してLv2基準で採点を実行する
4. WHEN GraderがLv2の採点を完了する, THE バックエンドAPI SHALL Reviewerに採点結果を渡してLv2向けフィードバック生成を実行する
5. WHEN Lv2の全ステップが完了する, THE フロントエンド SHALL 最終結果（各基準の合否・総合判定・フィードバック）をユーザーに表示する

### 要件8: Lv2完了時のデータ永続化

**ユーザーストーリー:** システム運営者として、Lv2の全ステップを完了したセッションのデータをDynamoDBに保存したい。受講者の進捗を管理し、Lv3以降のゲーティングに活用するため。

#### 受入基準

1. WHEN ユーザーがLv2の全ステップを完了する, THE バックエンドAPI SHALL 設問・回答・採点結果の完了レコードをDynamoDBに保存する
2. WHILE ユーザーがLv2セッション途中である, THE バックエンドAPI SHALL DynamoDBへの書き込みを行わない
3. WHEN Lv2完了レコードをDynamoDBに保存する, THE バックエンドAPI SHALL セッション識別子、タイムスタンプ、全設問、全回答、全採点結果、最終合否を含める
4. WHEN Lv2完了レコードをDynamoDBに保存する, THE バックエンドAPI SHALL SK（ソートキー）を「RESULT#lv2」として保存し、Lv1の結果と区別する
5. IF DynamoDBへのLv2保存が失敗する, THEN THE バックエンドAPI SHALL エラーをログに記録しユーザーにリトライ可能な旨を通知する

### 要件9: Lv2ゲーティング

**ユーザーストーリー:** カリキュラム受講者として、Lv1に合格した後にLv2にアクセスしたい。段階的に学習を積み上げられるようにするため。

#### 受入基準

1. WHILE ユーザーがLv1に合格していない, THE フロントエンド SHALL Lv2を非表示かつアクセス不可とする
2. WHEN ユーザーがLv1に合格する, THE フロントエンド SHALL Lv2カードを表示し「開始する」ボタンを有効にする
3. WHEN ユーザーがLv2に合格する, THE バックエンドAPI SHALL progressテーブルのlv2_passedフラグをtrueに更新する
4. THE バックエンドAPI SHALL レベル合格状態検証エンドポイント（GET /levels/status）でLv2の合格状態を返却する
5. WHEN フロントエンドがレベル表示を判定する, THE フロントエンド SHALL バックエンドAPIのレベル合格状態検証エンドポイントを呼び出してLv2の表示可否を判定する

### 要件10: Lv2フロントエンド

**ユーザーストーリー:** カリキュラム受講者として、Lv2専用のテスト画面でケーススタディに取り組みたい。Lv2の学習内容に集中できるようにするため。

#### 受入基準

1. THE フロントエンド SHALL Lv2専用のテスト実行ページ（lv2.html）を提供する
2. THE フロントエンド SHALL lv2.htmlでLv2の4ステップ（業務プロセス設計→AI実行指示→成果物検証→改善サイクル）を順次表示する
3. WHEN ユーザーがlv2.htmlにアクセスする, THE フロントエンド SHALL Lv1合格状態を検証し、未合格の場合はindex.htmlにリダイレクトする
4. THE フロントエンド SHALL index.htmlのLv2カードにlv2.htmlへのリンクを設定する
5. THE フロントエンド SHALL Lv2のケーススタディ形式に適したUI（シナリオ表示エリアの拡大、長文回答用テキストエリア）を提供する

### 要件11: Lv2バックエンドAPIエンドポイント

**ユーザーストーリー:** 開発者として、Lv2用のAPIエンドポイントを追加したい。Lv1のエンドポイントと分離し、レベル固有のプロンプト・ロジックを適用するため。

#### 受入基準

1. THE バックエンドAPI SHALL POST /lv2/generate エンドポイントを提供し、Lv2用テスト・ドリル生成を処理する
2. THE バックエンドAPI SHALL POST /lv2/grade エンドポイントを提供し、Lv2用回答採点を処理する
3. THE バックエンドAPI SHALL POST /lv2/complete エンドポイントを提供し、Lv2用完了レコード保存を処理する
4. THE バックエンドAPI SHALL 各Lv2エンドポイントでLv2固有のシステムプロンプトを使用する
5. THE バックエンドAPI SHALL 既存のGET /levels/statusエンドポイントを拡張し、Lv2の合格状態を含めて返却する
6. THE バックエンドAPI SHALL 各Lv2エンドポイントでCORS（Access-Control-Allow-Origin: *）を有効にする

### 要件12: Lv2デプロイメント

**ユーザーストーリー:** 開発者として、Lv2の追加をCI/CDパイプラインで自動デプロイしたい。既存のデプロイフローを維持しつつLv2を追加するため。

#### 受入基準

1. THE serverless.yml SHALL Lv2用の3つのLambda関数（generate、grade、complete）を定義する
2. WHEN コードがmainブランチにpushされる, THE CI/CDパイプライン SHALL Lv2のLambda関数を含めてデプロイする
3. WHEN コードがmainブランチにpushされる, THE CI/CDパイプライン SHALL lv2.htmlを含むフロントエンドをS3に同期する
4. THE serverless.yml SHALL Lv2のLambda関数に既存と同じDynamoDB・Bedrockのアクセス権限を付与する

### 要件13: Lv3・Lv4の定義（将来拡張の方向性）

**ユーザーストーリー:** カリキュラム設計者として、Lv3・Lv4の方向性を定義しておきたい。カリキュラム全体の一貫性を保ちながら段階的に拡張するため。

#### 受入基準

1. THE Lv3カリキュラム SHALL 「Lv3到達者はAI活用プロジェクトをリードし、チーム全体のAI活用レベルを引き上げる戦略を策定・実行できる状態」を目標として定義する
2. THE Lv4カリキュラム SHALL 「Lv4到達者は組織横断でAI活用の標準化・ガバナンスを設計し、持続的なAI活用文化を構築できる状態」を目標として定義する
3. THE フロントエンド SHALL Lv3・Lv4のカードをindex.htmlに「Coming Soon」として表示し続ける
